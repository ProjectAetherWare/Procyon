<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Procyon</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&display=swap');

:root {
  --bg: #0a0a0a;
  --fg: #fff;
  --star-yellow: #FFD700;
}

body {
  margin: 0;
  font-family: "Fira Code", monospace;
  background: var(--bg);
  color: var(--fg);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: linear-gradient(to right, rgba(255,255,255,0.07) 1px, transparent 1px),
              linear-gradient(to bottom, rgba(255,255,255,0.07) 1px, transparent 1px);
  background-size: 80px 80px;
  animation: gridmove 30s linear infinite;
  z-index: -1;
}
@keyframes gridmove {
  0% { background-position: 0 0, 0 0; }
  100% { background-position: 80px 80px, 80px 80px; }
}

#logo {
  margin: 20px auto;
  display: block;
  width: 200px;
}

.top-bar {
  display: flex;
  justify-content: space-between;
  width: 90%;
  max-width: 900px;
  margin: 10px auto;
  align-items: center;
}

#searchBar {
  flex: 1;
  padding: 6px 12px;
  border-radius: 8px;
  border: none;
  outline: none;
  font-family: "Fira Code", monospace;
}

#favoritesBtn {
  margin-left: 10px;
  padding: 6px 12px;
  border-radius: 8px;
  background: rgba(255,255,255,0.1);
  cursor: pointer;
}

.category-tabs {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin: 15px 0;
  flex-wrap: wrap;
}

.category-tab {
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  background: rgba(255,255,255,0.1);
  transition: background 0.2s;
}

.category-tab.active, .category-tab:hover {
  background: rgba(255,255,255,0.25);
}

.games-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 16px;
  padding: 20px;
}

.game-button {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 120px;
  height: 120px;
  background: rgba(255,255,255,0.05);
  border-radius: 12px;
  cursor: pointer;
  transition: background 0.2s, transform 0.1s;
  text-align: center;
  padding: 8px;
  position: relative;
}

.game-button:hover {
  background: rgba(255,255,255,0.15);
  transform: translateY(-2px);
}

.game-button img {
  width: 48px;
  height: 48px;
  margin-bottom: 8px;
  filter: invert(1);
}

.game-button span {
  font-size: 14px;
  word-break: break-word;
}

/* Star button */
.star-btn {
  position: absolute;
  top: 6px;
  right: 6px;
  font-size: 18px;
  cursor: pointer;
  color: rgba(255,255,255,0.5);
  transition: color 0.2s;
}

.star-btn.favorited {
  color: var(--star-yellow);
}

.pagination {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin: 20px 0;
}

.page-btn {
  background: rgba(255,255,255,0.1);
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
}

.page-btn.active, .page-btn:hover {
  background: rgba(255,255,255,0.25);
}
</style>
</head>
<body>

<img id="logo" src="logo.png" alt="Procyon Logo">

<div class="top-bar">
  <input type="text" id="searchBar" placeholder="Search games..." oninput="filterGames()">
  <button id="favoritesBtn" onclick="showFavorites()">Favorites</button>
</div>

<div class="category-tabs" id="categoryTabs">
  <!-- Category buttons dynamically added -->
</div>

<div class="games-container" id="gamesContainer">
  <!-- Game buttons dynamically added -->
</div>

<div class="pagination" id="paginationContainer">
  <!-- Page buttons dynamically added -->
</div>

<script>
// === Games and categories ===
const allGames = [
  {name:"1", category:"Other"}, {name:"1v1space", category:"Gun"}, {name:"2048", category:"Other"},
  {name:"8ball", category:"Other"}, {name:"9007199254740992", category:"Other"}, {name:"BTD4", category:"Other"},
  {name:"Bitlife", category:"Other"}, {name:"Bloxorz", category:"Other"}, {name:"Chess", category:"Other"},
  {name:"DogeMiner", category:"Other"}, {name:"Henrystickman", category:"Other"}, {name:"HexGL", category:"Car"},
  {name:"L2F2", category:"Car"}, {name:"L2F3", category:"Car"}, {name:"Minecraft", category:"Sandbox"},
  {name:"OT", category:"Other"}, {name:"PE", category:"Other"}, {name:"SandboxelsOLD", category:"Sandbox"},
  // Add all other games similarly...
];

const categories = ["Car","War","Gun","Sandbox","Other"];
let currentCategory = "Car";
let currentPage = 0;
const pageSize = 12;
let favorites = JSON.parse(localStorage.getItem("favorites")||"[]");

const categoryTabsContainer = document.getElementById("categoryTabs");
categories.forEach(cat=>{
  const btn = document.createElement("div");
  btn.className = "category-tab" + (cat===currentCategory?" active":"");
  btn.innerText = cat;
  btn.onclick = () => { currentCategory=cat; currentPage=0; updateTabs(); renderGames(); };
  categoryTabsContainer.appendChild(btn);
});

function updateTabs(){
  Array.from(categoryTabsContainer.children).forEach(btn=>{
    btn.classList.toggle("active", btn.innerText===currentCategory);
  });
}

function renderGames() {
  const container = document.getElementById("gamesContainer");
  container.innerHTML = "";

  let filtered = allGames.filter(g => g.category === currentCategory);
  const start = currentPage * pageSize;
  const paged = filtered.slice(start, start + pageSize);

  paged.forEach(game => {
    const btn = document.createElement("div");
    btn.className = "game-button";
    btn.innerHTML = `
      <div class="star-btn ${favorites.includes(game.name)?'favorited':''}" onclick="toggleFavorite(event,'${game.name}')">★</div>
      <img src="projects/${game.name}/logo.png" alt="${game.name} Logo">
      <span>${game.name}</span>`;
    btn.onclick = () => window.location.href = `projects/${game.name}/index.html`;
    container.appendChild(btn);
  });

  renderPagination(filtered.length);
}

function toggleFavorite(e, name) {
  e.stopPropagation();
  if(favorites.includes(name)){
    favorites = favorites.filter(f => f!==name);
  } else {
    favorites.push(name);
  }
  localStorage.setItem("favorites", JSON.stringify(favorites));
  renderGames();
}

function renderPagination(totalGames) {
  const container = document.getElementById("paginationContainer");
  container.innerHTML = "";
  const pages = Math.ceil(totalGames / pageSize);
  for(let i=0;i<pages;i++){
    const btn = document.createElement("div");
    btn.className = "page-btn" + (i===currentPage ? " active" : "");
    btn.innerText = i+1;
    btn.onclick = () => { currentPage=i; renderGames(); };
    container.appendChild(btn);
  }
}

function filterGames() {
  const search = document.getElementById("searchBar").value.toLowerCase();
  const container = document.getElementById("gamesContainer");
  container.innerHTML = "";

  let filtered = allGames.filter(g => g.category === currentCategory && g.name.toLowerCase().includes(search));
  filtered.forEach(game => {
    const btn = document.createElement("div");
    btn.className = "game-button";
    btn.innerHTML = `
      <div class="star-btn ${favorites.includes(game.name)?'favorited':''}" onclick="toggleFavorite(event,'${game.name}')">★</div>
      <img src="projects/${game.name}/logo.png" alt="${game.name} Logo">
      <span>${game.name}</span>`;
    btn.onclick = () => window.location.href = `projects/${game.name}/index.html`;
    container.appendChild(btn);
  });

  renderPagination(filtered.length);
}

function showFavorites() {
  const container = document.getElementById("gamesContainer");
  container.innerHTML = "";
  const favGames = allGames.filter(g => favorites.includes(g.name));
  favGames.forEach(game => {
    const btn = document.createElement("div");
    btn.className = "game-button";
    btn.innerHTML = `
      <div class="star-btn favorited" onclick="toggleFavorite(event,'${game.name}')">★</div>
      <img src="projects/${game.name}/logo.png" alt="${game.name} Logo">
      <span>${game.name}</span>`;
    btn.onclick = () => window.location.href = `projects/${game.name}/index.html`;
    container.appendChild(btn);
  });
  document.getElementById("paginationContainer").innerHTML="";
}

renderGames();
</script>
</body>
</html>
